## 3.2 View的滑动

通过三种方式可以实现View的滑动：
- 第一种是通过View本身提供的scrollTo/scrollBy
- 方法来实现滑动；第二种是通过动画给View施加平移效果来实现滑动；
- 第三种是通过改View的LayoutParams使得View重新布局从而实现滑动

### 3.2.1 使用scrollTo/scrollBy
- scrollBy实际上也是调用了scrollTo方法，它实现了基于当前位置的相对滑动，
- scrollTo则实现了基于所传递参数的绝对滑动

**滑动过程中View内部的两个属性mScrollX和mScrollY的改变规则**:
- mScrollX的值总是等于View左边缘和View内容左边缘在水平方向的距离
- mScrollY的值总是等于View上边缘和View内容上边缘在竖直方向的距离
- **scrollTo和scrollBy只能改变View内容的位置而不能改变View在布局中的位置**

**mScrollX和mScrollY的正负判断依据**:
- mScrollX和mScrollY的单位为像素,是View内容滑动的距离
- 当View左边缘在View内容左边缘的右边时，mScrollX为正值，反之为负值
- 当View上边缘在View内容上边缘的下边时，mScrollY为正值，反之为负值

![](https://s3.bmp.ovh/imgs/2022/07/14/16ee7768e28d1f5d.png)


### 3.2.2 使用动画

**View动画**
```xml
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:zAdjustment="normal" >
    <translate
        android:duration="100"
        android:fromXDelta="0"
        android:fromYDelta="0"
        android:interpolator="@android:anim/linear_interpolator"
        android:toXDelta="100"
        android:toYDelta="100" />
</set>
```
```java
binding.btnViewAnim.setAnimation(AnimationUtils.loadAnimation(getThisContext(),R.anim.translate));
```
- 如果fillAfter为false，那么在动画完成的一刹那，View会瞬间恢复到动画前的状
态；
- View动画并不能真正改变View的位置,View还是在原地，只是他的影像被绘制到了别处

**属性动画**
```java
ObjectAnimator.ofFloat(binding.btnViewAnim,"translationX",0,100).setDuration(100).start();
```

### 3.2.3 改变布局参数
**改变布局参数，即改变LayoutParams**
```java
MarginLayoutParams params = (MarginLayoutParams)mButton1.getLayoutParams();
params.width += 100;
params.leftMargin += 100;
mButton1.requestLayout();
//或者mButton1.setLayoutParams(params);
```

### 3.2.4 各种滑动方式的对比
- scrollTo/scrollBy：操作简单，适合对View内容的滑动；
- 动画：操作简单，主要适用于没有交互的View和实现复杂的动画效果；
- 改变布局参数：操作稍微复杂，适用于有交互的View。